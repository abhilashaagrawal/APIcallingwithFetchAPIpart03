<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    </head>
    <body>
        <button class="btn btn-success btn-sm mybtn">Get Todos</button>
        <div class="d-flex justify-content-center">
            <div class="spinner-grow text-success" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
        
        <!-- Modal -->
        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Modal title</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <ul class="list-group">
                        <li class="list-group-item"></li>
                        <li class="list-group-item"></li>
                        <li class="list-group-item"></li>
                        <li class="list-group-item"></li>
                    </ul>
                </div>
                <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div>
            </div>
        </div>
        <table class="table">
            <thead>
              <tr>
                <th scope="col">UserId</th>
                <th scope="col">Id</th>
                <th scope="col">Title</th>
                <th scope="col">Completed</th>
                <th scope="col">Action</th>
              </tr>
            </thead>
            <tbody>
             
            </tbody>
        </table>
        
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
        <script>
            document.querySelector('.mybtn').addEventListener('click',function(){
                // alert('okkkkkkk');
                fetch('https://jsonplaceholder.typicode.com/todos',{method:"GET"})
                .then((response)=>{
                   // console.log(response);
                    response.json().then((data)=>{
                        document.querySelector('.spinner-grow').remove();
                        console.log(data);
                        // console.log(data.userId);
                        var tr='';
                        data.forEach((currentElement,index,arr) => {
                            tr= tr +`<tr>
                                        <td>`+currentElement.userId+`</td>
                                        <td>`+currentElement.id+`</td>
                                        <td>`+currentElement.title+`</td>
                                        <td>`+currentElement.completed+`</td>
                                        <td>
                                            <button class="btn btn-success btn-sm a_viewbtn" data-bs-toggle="modal" data-bs-target="#exampleModal" >View</button>
                                            <button class="btn btn-primary btn-sm">Edit</button>
                                            <button class="btn btn-danger btn-sm a_delbtn">Delete</button>
                                        </td>
                                    </tr>`
                                    
                        });
                        console.log(tr);
                        document.querySelector('table >tbody').innerHTML=tr;
                        document.addEventListener('click',function(e){
                            //alert('okkkkkk');
                            // console.log(e);
                            // console.log(e.target);
                            if(e.target&&e.target.classList[3]=='a_viewbtn')
                            {
                                // console.log('okk');
                               // console.log(e.target.closest('tr').querySelector('td:first-child').innerHTML);
                                let ud=e.target.closest('tr').querySelector('td:first-child').innerHTML;
                                let id=e.target.closest('tr').querySelector('td:nth-child(2)').innerHTML;
                                let title=e.target.closest('tr').querySelector('td:nth-child(3)').innerHTML;
                                let completed=e.target.closest('tr').querySelector('td:nth-child(4)').innerHTML;
                                console.log(ud);
                                console.log(id);
                                console.log(title);
                                console.log(completed);
                                document.querySelector('.modal-body>.list-group>li:first-child').innerHTML=ud;
                                document.querySelector('.modal-body>.list-group>li:nth-child(2)').innerHTML=id;
                                document.querySelector('.modal-body>.list-group>li:nth-child(3)').innerHTML=title;
                                document.querySelector('.modal-body>.list-group>li:last-child').innerHTML=completed;
                            }
                            if(e.target&&e.target.classList[3]=='a_delbtn')
                            {
                                //console.log(e.target.closest('tr').remove());
                                e.target.closest('tr').remove();
                            }
                        })
                    })
                    
                })
                .catch((error)=>{
                    console.log(error);
                });
                
            })
        </script>
    </body>
</html>